<!-- TODO: 
	Take out curve, leave stocks price only.

-->
	<head>
		<script src="//code.jquery.com/jquery-2.1.4.min.js"></script>
	</head>
	<body>
	<div id="price">TSMC(2330): </div>

	<script>
		var current = [ 
				{ "num": 2330, "name": "台積電", "price": 0 },
				{ "num": 2201, "name": "裕隆", "price": 0 },
				{ "num": 0050, "name": "台灣50", "price": 0 },
				{ "num": 2412, "name": "中華電", "price": 0 },
			];
		var chage = function(stock_num){
			$.ajax({
				// The 'type' property sets the HTTP method.
				// A value of 'PUT' or 'DELETE' will trigger a preflight request.
				type: 'GET',

				// The URL to make the request to.
				url: 'https://finance.google.com/finance/info?client=ig&q=TPE:' + stock_num,
				dataType: 'jsonp',
				cache: false,
				success: function(response){           
					console.log('(' + stock_num + '): ' + response[0]['l_cur']);
					$('#price').text('TSMC(2330): ' + response[0]['l_cur']);
   						
					if(current < response[0]['l'])
					{
						$('#price').fadeTo(10, 1, function(){
							$(this).css("background-color", "red");
    						}).fadeTo(500, 0, function(){
							$(this).css("background-color", "white");
						}).fadeTo(1, 1, function(){
							$(this).css("background-color", "white");
						});
	
						current = response[0]['l']; 
					}
					else if(current > response[0]['l'])
					{
						$('#price').fadeTo(10, 1, function(){
							$(this).css("background-color", "green");
    						}).fadeTo(500, 0, function(){
							$(this).css("background-color", "white");
						}).fadeTo(1, 1, function(){
							$(this).css("background-color", "white");
						});
	
						current = response[0]['l']; 
					}
				}	 
			});	
		}

		setInterval(function() {		   
			
		}, 2000);	
	
	</script>
</body>
